<div class="container d-flex justify-content-center align-items-center py-5"
  style="min-height: 100vh; font-family: 'Poppins', sans-serif;">
  <div class="card border-0 shadow-lg rounded-5 p-4 w-100" style="max-width: 600px; background-color: #fefefe;">
    <a class="btn btn-outline-secondary px-3 d-inline-flex align-items-center gap-2 mb-3" style="border-radius: 50px; width: 6rem; height: 2rem;"
      href="dashboard/candidate-list">
      <i class="bi bi-arrow-left fs-5"></i>
      <span>Back</span>
    </a>
    <h3 class="text-center mb-4 text-success fw-semibold">{{isRenew ? 'Renew Membership' : (isBalancePayment ? 'Add Balance Payment' : 'Add Membership')}}</h3>

    <form [formGroup]="registerForm" (ngSubmit)="onRegister()">
      <div class="row g-3">

        <!-- Full Name -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-muted ms-2">Full Name *</label>
          <input type="text" class="form-control rounded-pill px-4 py-2" formControlName="fullName"
            placeholder="Enter full name" />
        </div>

        <!-- Candidate Photo -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-muted ms-2">Photo</label>
          <input type="file"
            accept="image/*"
            capture="environment"
            formControlName="photo"
            class="form-control rounded-pill px-4 py-2"
            (change)="onPhotoSelected($event)" />
        </div>

        <!-- Photo Preview -->
        <div class="mb-3 text-center" *ngIf="candidatePhotoUrl">
          <img [src]="candidatePhotoUrl" alt="Candidate Preview" class="img-thumbnail rounded-circle" style="width: 100px; height: 100pxm;">
        </div>  

        <!-- Email -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-muted ms-2">Email</label>
          <input type="email" class="form-control rounded-pill px-4 py-2" formControlName="email"
            placeholder="example@gmail.com" />
        </div>

        <!-- Mobile -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-muted ms-2">Mobile *</label>
          <input type="text" class="form-control rounded-pill px-4 py-2" formControlName="mobile"
            placeholder="Enter mobile number" />
        </div>

        <!-- Date of Birth -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-muted ms-2">Date of Birth *</label>
          <input type="date" class="form-control rounded-pill px-4 py-2" formControlName="dob" />
        </div>

        <!-- Service Type -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-muted ms-2">Service Type *</label>
          <select class="form-select rounded-pill px-4 py-2" formControlName="serviceType">
            <option value="">-- Select Service --</option>
            <option *ngFor="let service of serviceList" [value]="service.servicetypeid">
              {{ service.servicename }}
            </option>
          </select>
        </div>

        <!-- Membership -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-muted ms-2">Membership *</label>
          <select class="form-select rounded-pill px-4 py-2" formControlName="packageType">
            <option value="">-- Select Membership --</option>
            <option *ngFor="let pkg of packageList" [value]="pkg.packagetypeid">
              {{ pkg.packagename }}
            </option>
          </select>
        </div>

        <!-- Admission Fee -->
        <div class="mb-3" *ngIf="!isRenew || !isBalancePayment">
          <label class="form-label fw-semibold text-muted ms-2">Admission Fee *</label>
          <input type="number" class="form-control rounded-pill px-4 py-2" formControlName="admissionFee"
            placeholder="Enter admission fee" />
        </div>

        <!-- Total Amount -->
        <div class="mb-3">
          <!-- <label class="form-label fw-semibold text-muted ms-2">Total Amount</label> -->
          <div class="d-flex align-items-center justify-content-between">
            <label *ngIf="!isManualTotal" class="form-label fw-semibold text-muted ms-2">Total Amount *</label>
            <label *ngIf="isManualTotal" class="form-label fw-semibold text-muted ms-2">Total Amount + Admission Fee *</label>
        
            <div class="form-check form-switch">
              <input 
                class="form-check-input" 
                type="checkbox" 
                id="isManual" 
                role="switch"
                formControlName="isManual"
              />
              <label class="form-label fw-semibold text-muted ms-2" style="margin-right: 1rem;" for="manualToggle">Manual</label>
            </div>
          </div>
          
          <input type="number" class="form-control rounded-pill px-4 py-2" formControlName="totalAmt" />
        </div>   

        <!-- Paid Amount -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-muted ms-2">Paid Amount *</label>
          <input type="number" class="form-control rounded-pill px-4 py-2" formControlName="paidAmt"
            placeholder="Enter paid amount" />
        </div>

        <!-- Balance Amount -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-muted ms-2">Balance Amount *</label>
          <input type="number" class="form-control rounded-pill px-4 py-2" formControlName="balanceAmt" readonly />
        </div>

        <!-- Admission Date -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-muted ms-2">Admission Date *</label>
          <input type="date" class="form-control rounded-pill px-4 py-2" formControlName="admissionDate"
            [disabled]="!isRenew" />
        </div>

        <!-- Start Date -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-muted ms-2">Start Date *</label>
          <input type="date" class="form-control rounded-pill px-4 py-2" formControlName="startDate" />
        </div>

        <!-- End Date -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-muted ms-2">End Date *</label>
          <input type="date" class="form-control rounded-pill px-4 py-2" formControlName="endDate" readonly />
        </div>

        <!-- Submit Button -->
        <div class="d-grid">
          <button class="btn btn-success rounded-pill w-100 py-2" [disabled]="registerForm.invalid" type="submit">{{ isRenew ? 'Renew Membership' : (isBalancePayment ? 'Update' : 'Add Membership') }}</button>
        </div>
      </div>
    </form>
  </div>
</div>