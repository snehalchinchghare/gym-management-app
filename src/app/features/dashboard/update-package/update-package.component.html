<div *ngIf="errorMessage" class="alert alert-warning text-center rounded-pill mx-3">
  {{ errorMessage }}
</div>

<div class="container d-flex justify-content-center align-items-center py-5"
  style="min-height: 100vh; font-family: 'Poppins', sans-serif;">
  <div class="card border-0 shadow-lg rounded-5 p-4 w-100" style="max-width: 600px; background-color: #fefefe;">
    <h3 class="text-center mb-4 text-success fw-semibold">Update Gym Details</h3>

    <form [formGroup]="registerForm" (ngSubmit)="onRegister()">
      <div class="row g-3">

        <!-- Full Name -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-muted ms-2">Full Name</label>
          <input type="text" class="form-control rounded-pill px-4 py-2" formControlName="fullName"
            placeholder="Full Name" />
          <div class="text-danger small mt-1"
            *ngIf="registerForm.get('fullName')?.touched && registerForm.get('fullName')?.invalid">
            Full Name is required.
          </div>
        </div>

        <!-- Email -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-muted ms-2">Email</label>
          <input type="email" class="form-control rounded-pill px-4 py-2" formControlName="email"
            placeholder="example@gmail.com" />
          <div class="text-danger small mt-1"
            *ngIf="registerForm.get('email')?.touched && registerForm.get('email')?.invalid">
            Valid email is required.
          </div>
        </div>

        <!-- Mobile -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-muted ms-2">Mobile</label>
          <input type="number" class="form-control rounded-pill px-4 py-2" formControlName="gymmobile"
            placeholder="" />
          <div class="text-danger small mt-1"
            *ngIf="registerForm.get('gymmobile')?.touched && registerForm.get('gymmobile')?.invalid">
            Mobile is required.
          </div>
        </div>

        <!-- Gym Name -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-muted ms-2">Gym Name</label>
          <input type="text" class="form-control rounded-pill px-4 py-2" formControlName="gymName"
            placeholder="Gym Name" />
          <div class="text-danger small mt-1"
            *ngIf="registerForm.get('gymName')?.touched && registerForm.get('gymName')?.invalid">
            Gym Name is required.
          </div>
        </div>

        <!-- Gym Address -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-muted ms-2">Gym Address</label>
          <input type="text" class="form-control rounded-pill px-4 py-2" formControlName="gymAddress"
            placeholder="Gym Address" />
          <div class="text-danger small mt-1"
            *ngIf="registerForm.get('gymAddress')?.touched && registerForm.get('gymAddress')?.invalid">
            Gym Address is required.
          </div>
        </div>

        <!-- Gym Logo -->
        <div class="mb-3">
          <label class="form-label fw-semibold text-muted ms-2">Gym Logo</label>
          <input type="file" class="form-control rounded-pill" accept="image/*" (change)="onFileSelected($event)"
            formControlName="gymLogo" />
        </div>

        <!-- Image Preview -->
        <div class="col-12 text-center" *ngIf="gymLogoBase64">
          <img [src]="gymLogoBase64" class="img-fluid rounded shadow-sm" style="max-height: 150px;"
            alt="Gym Logo Preview" />
        </div>

        <!-- Accordion for Packages -->
        <div class="accordion mb-3">
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button fw-semibold form-label text-muted ms-2"
                      [class.collapsed]="!isMembershipTableCollapsed"
                      type="button"
                      (click)="togglemembershipTable()">
                Membership Pricing
              </button>
            </h2>
        
            <div class="accordion-collapse"
                 [class.collapse]="true"
                 [class.show]="isMembershipTableCollapsed">
              <div class="accordion-body p-2">
                <div style="overflow-x: auto; width: 100%;">
                  <table class="table table-bordered text-center align-middle small" style="min-width: 700px;">
                    <thead class="table-primary">
                      <tr class="form-label fw-semibold text-muted ms-2">
                        <th>Duration</th>
                        <th>Gym</th>
                        <th>Gym + Cardio</th>
                        <th>Cardio</th>
                        <th>Personal Trainer</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr class="form-label fw-semibold text-muted ms-2">
                        <td>Monthly</td>
                        <td>
                          <input type="text" class="form-control" formControlName="gym_monthly" />
                        </td>
                        <td>
                          <input type="text" class="form-control" formControlName="gymCardio_monthly" />
                        </td>
                        <td>
                          <input type="text" class="form-control" formControlName="cardio_monthly" />
                        </td>
                        <td>
                          <input type="text" class="form-control" formControlName="pt_monthly" />
                        </td>
                      </tr>
                      <tr class="form-label fw-semibold text-muted ms-2">
                        <td>Quarterly</td>
                        <td>
                          <input type="text" class="form-control" formControlName="gym_quarterly" />
                        </td>
                        <td>
                          <input type="text" class="form-control" formControlName="gymCardio_quarterly" />
                        </td>
                        <td>
                          <input type="text" class="form-control" formControlName="cardio_quarterly" />
                        </td>
                        <td>
                          <input type="text" class="form-control" formControlName="pt_quarterly" />
                        </td>
                      </tr>
                      <tr class="form-label fw-semibold text-muted ms-2">
                        <td>Half Yearly</td>
                        <td>
                          <input type="text" class="form-control" formControlName="gym_halfYearly" />
                        </td>
                        <td>
                          <input type="text" class="form-control" formControlName="gymCardio_halfYearly" />
                        </td>
                        <td>
                          <input type="text" class="form-control" formControlName="cardio_halfYearly" />
                        </td>
                        <td>
                          <input type="text" class="form-control" formControlName="pt_halfYearly" />
                        </td>
                      </tr>
                      <tr class="form-label fw-semibold text-muted ms-2">
                        <td>Yearly</td>
                        <td>
                          <input type="text" class="form-control" formControlName="gym_yearly" />
                        </td>
                        <td>
                          <input type="text" class="form-control" formControlName="gymCardio_yearly" />
                        </td>
                        <td>
                          <input type="text" class="form-control" formControlName="cardio_yearly" />
                        </td>
                        <td>
                          <input type="text" class="form-control" formControlName="pt_yearly" />
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Submit Button -->
        <div class="col-12">
          <button type="submit" class="btn btn-success rounded-pill w-100 py-2" [disabled]="registerForm.invalid">
            Update
          </button>
        </div>
      </div>
    </form>
  </div>
</div>